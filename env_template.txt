# ===================================================================
# 의학 지식 AI 에이전트 환경 변수 설정
# ===================================================================
# 
# 사용법:
# 1. 이 파일을 .env로 복사: copy env_template.txt .env
# 2. 아래 값들을 실제 값으로 변경
# 3. .env 파일은 절대 Git에 커밋하지 마세요!
#
# ===================================================================

# -------------------------------------------------------------------
# Entity Extraction 설정 (⭐ 필수)
# -------------------------------------------------------------------

# 사용할 Entity Extractor 선택 (medcat|quickumls|kmbert_ner)
# - medcat: MedCAT (UMLS 기반 concept extraction/linking)
# - quickumls: QuickUMLS (UMLS 문자열 매칭)
# - kmbert_ner: KM-BERT NER (한국어 의료 NER)
ENTITY_EXTRACTOR=medcat

# Entity AB 설정 파일 경로 (선택)
ENTITY_AB_CONFIG=configs/default.yaml

# -------------------------------------------------------------------
# MedCAT 설정
# -------------------------------------------------------------------

# MedCAT 모델팩 경로 (절대 경로 사용 권장)
MEDCAT2_MODEL_PATH=C:\Users\KHIDI\Downloads\final_medical_ai_agent\medcat2\mc_modelpack_snomed_int_16_mar_2022_25be3857ba34bdd5

# MedCAT Confidence Threshold (0.0-1.0)
MEDCAT_CONFIDENCE_THRESHOLD=0.5

# -------------------------------------------------------------------
# QuickUMLS 설정
# -------------------------------------------------------------------

# QuickUMLS 인덱스 디렉토리 (빌드 필요)
# 빌드 방법: bash scripts/build_quickumls_index.sh /path/to/UMLS ./data/quickumls_index
QUICKUMLS_INDEX_DIR=data/quickumls_index

# QuickUMLS 설정
QUICKUMLS_THRESHOLD=0.7
QUICKUMLS_SIMILARITY_NAME=jaccard
QUICKUMLS_WINDOW=5

# -------------------------------------------------------------------
# KM-BERT NER 설정
# -------------------------------------------------------------------

# KM-BERT NER 체크포인트 경로 (fine-tuning 후)
# 학습 방법: python scripts/train_kmbert_ner.py --output_dir models/kmbert_ner_kbmc
KMBERT_NER_DIR=models/kmbert_ner_kbmc

# KM-BERT Base Model (fine-tuning 전)
KMBERT_BASE_MODEL=madatnlp/km-bert

# -------------------------------------------------------------------
# OpenAI API 설정 (⭐ 필수)
# -------------------------------------------------------------------

# OpenAI API 키
OPENAI_API_KEY=your_openai_api_key_here

# 사용할 LLM 모델
LLM_MODEL=gpt-4o-mini

# 임베딩 모델
EMBEDDING_MODEL=text-embedding-3-large

# -------------------------------------------------------------------
# Google API 설정 (선택적)
# -------------------------------------------------------------------

# Google Translate API 키 (한국어 번역용)
GOOGLE_API_KEY=your_google_api_key_here

# Google Gemini API 키 (대안 LLM)
GEMINI_API_KEY=your_gemini_api_key_here

# -------------------------------------------------------------------
# 데이터 경로 설정
# -------------------------------------------------------------------

DATA_ROOT=./data
CORPUS_PATH=./data/corpus
INDEX_PATH=./data/index
PATIENT_DATA_PATH=./data/patients

# -------------------------------------------------------------------
# 실험 설정
# -------------------------------------------------------------------

EXPERIMENT_OUTPUT_DIR=./runs
LOG_LEVEL=INFO
RANDOM_SEED=42

# -------------------------------------------------------------------
# Feature Flags (Ablation 실험용)
# -------------------------------------------------------------------

SELF_REFINE_ENABLED=true
MAX_REFINE_ITERATIONS=2
QUALITY_THRESHOLD=0.5
RETRIEVAL_MODE=hybrid
USE_DUAL_INDEX=true
RERANKING_ENABLED=false

# -------------------------------------------------------------------
# 고급 설정
# -------------------------------------------------------------------

TOKEN_BUDGET=3000
TEMPERATURE=0.2
MAX_TOKENS=800
RETRIEVAL_TOP_K=10
RRF_K=60

